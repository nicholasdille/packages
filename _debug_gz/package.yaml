name: _debug_gz
description: Package used for development and debugging (based on cheat)
repo: nicholasdille/packages
version:
  latest: 4.2.0 # renovate: datasource=github-releases depName=cheat/cheat
tags:
  - debug
install:
  script: |-
    download "https://github.com/cheat/cheat/releases/download/${requested_version}/cheat-linux-amd64.gz"
    ungz cheat-linux-amd64.gz
    mv cheat-linux-amd64 cheat
    install_binary cheat

    mkdir -p "${HOME}/.config/cheat/cheatsheets/personal"
    if ! test -s "${HOME}/.config/cheat/conf.yml"; then
        cheat --init > "${HOME}/.config/cheat/conf.yml"
    fi

    if ! test -d "${HOME}/.config/cheat/cheatsheets/community"; then
        git clone https://github.com/cheat/cheatsheets "${HOME}/.config/cheat/cheatsheets/community"
    else
        cd "${HOME}/.config/cheat/cheatsheets/community"
        git pull
    fi
