name: cheat
description: cheat allows you to create and view interactive cheatsheets on the command-line
repo: cheat/cheat
version:
  latest: 4.2.0 # renovate: datasource=github-releases depName=cheat/cheat
  command: cheat --version
  filter: ^[[:digit:]]
  pattern: s/^(.+)$/\1/
tags:
  - shell
  - help
  - support
  - man
  - manpage
install:
  script: |-
    echo "https://github.com/cheat/cheat/releases/download/${requested_version}/cheat-linux-amd64.gz" | \
        download_file | \
        gunzip_file | \
        store_file cheat | \
        make_executable

    mkdir -p "${HOME}/.config/cheat/cheatsheets/personal"
    cheat --init > "${HOME}/.config/cheat/conf.yml"
    
    if ! test -d "${HOME}/.config/cheat/cheatsheets/community"; then
        git clone https://github.com/cheat/cheatsheets "${HOME}/.config/cheat/cheatsheets/community"
    else
        cd "${HOME}/.config/cheat/cheatsheets/community"
        git pull
    fi
